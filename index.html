<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RuneQuest NPC Combat Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 5px; background-color: black; color: white; text-align: center; }
        h2, h3 { font-variant: small-caps; letter-spacing: 1px; margin-bottom: 10px; }
        .tracker-container { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .tracker { width: 40%; padding: 10px; border: 2px solid #888; border-radius: 8px; background-color: #222; text-align: center; margin-bottom: 15px; }
        .henchmen-container { display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; }
        .henchmen { width: 30%; padding: 5px; border: 1px solid #555; border-radius: 6px; background-color: #333; text-align: center; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th, td { padding: 4px; text-align: center; border-bottom: 1px solid #666; }
        th { background-color: #444; }
        input { width: 80px; padding: 3px; text-align: center; background-color: #333; color: white; border: 1px solid #555; }
        .npc-name { width: 90%; padding: 4px; background-color: #444; color: white; border: 2px solid #999; text-align: center; margin-bottom: 3px; }
        .status, .weapon-name, .weapon-hp, .shield-name, .shield-hp { width: 48%; padding: 3px; background-color: #555; color: white; border: 1px solid #777; text-align: center; display: inline-block; margin-top: 3px; }
        .duplicate-btn { margin-top: 5px; padding: 6px 12px; background-color: #888; color: black; border: none; cursor: pointer; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>RuneQuest NPC Combat Tracker</h2>
    
    <div class="tracker-container">
        <!-- Main Opponent Section -->
        <div class="tracker">
            <input type="text" class="npc-name" placeholder="Main Opponent Name" id="mainOpponent">
            <label for="mainTotalHP"><strong>Total HP:</strong></label>
            <input type="number" id="mainTotalHP" value="10" onchange="calculateHitLocations('main')">

            <table>
                <thead>
                    <tr>
                        <th>Location</th>
                        <th>Roll</th>
                        <th>Total HP</th>
                        <th>Current HP</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Right Leg</td><td>1-4</td><td><input type="text" id="mainRightLegTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Left Leg</td><td>5-8</td><td><input type="text" id="mainLeftLegTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Abdomen</td><td>9-11</td><td><input type="text" id="mainAbdomenTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Chest</td><td>12</td><td><input type="text" id="mainChestTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Right Arm</td><td>13-15</td><td><input type="text" id="mainRightArmTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Left Arm</td><td>16-18</td><td><input type="text" id="mainLeftArmTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Head</td><td>19-20</td><td><input type="text" id="mainHeadTotal" readonly></td><td><input type="number"></td></tr>
                </tbody>
            </table>
            <input type="text" class="weapon-name" placeholder="Weapon 1 Name">
            <input type="number" class="weapon-hp" placeholder="Weapon 1 HP">
            <input type="text" class="weapon-name" placeholder="Weapon 2 Name">
            <input type="number" class="weapon-hp" placeholder="Weapon 2 HP">
            <input type="text" class="shield-name" placeholder="Shield Name & Size">
            <input type="number" class="shield-hp" placeholder="Shield HP">
            <input type="text" class="status" placeholder="Status (e.g., Injured, Severed)">
        </div>

        <h3>Henchmen</h3>
        <button class="duplicate-btn" onclick="duplicateHenchman()">Add Henchman</button>
        <div class="henchmen-container" id="henchmenContainer"></div>
    </div>

    <script>
        function lookupHP(totalHP) {
    let coreHP = Math.max(Math.ceil(totalHP / 3), 2);
    let chestHP = coreHP + 1;
    let armHP = coreHP - 1;
    
    return {
        "Right Leg": coreHP,
        "Left Leg": coreHP,
        "Abdomen": coreHP,
        "Chest": chestHP,
        "Right Arm": armHP,
        "Left Arm": armHP,
        "Head": coreHP
    };
}


        function calculateHitLocations(id) {
            let totalHP = parseInt(document.getElementById(`${id}TotalHP`).value);
            let hpValues = lookupHP(totalHP);

            Object.entries(hpValues).forEach(([location, value]) => {
                document.getElementById(`${id}${location.replace(" ", "")}Total`).value = value;
            });
        }

        function duplicateHenchman() {
            let henchmanId = `henchman${document.getElementsByClassName("henchmen").length + 1}`;
            let henchmanTemplate = `
            <div class="henchmen">
                <input type="text" class="npc-name" placeholder="Henchman Name">
                <label><strong>Total HP:</strong></label>
                <input type="number" id="${henchmanId}TotalHP" value="10" onchange="calculateHitLocations('${henchmanId}')">
                <table>
                    <thead>
                        <tr>
                            <th>Location</th>
                            <th>Roll</th>
                            <th>Total HP</th>
                            <th>Current HP</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${Object.keys(lookupHP(10)).map(location => `
                        <tr>
                            <td>${location}</td>
                            <td>-</td>
                            <td><input type="text" id="${henchmanId}${location.replace(" ", "")}Total" readonly></td>
                            <td><input type="number"></td>
                        </tr>`).join("")}
                    </tbody>
                </table>
                <input type="text" class="weapon-name" placeholder="Weapon 1 Name">
                <input type="number" class="weapon-hp" placeholder="Weapon 1 HP">
                <input type="text" class="weapon-name" placeholder="Weapon 2 Name">
                <input type="number" class="weapon-hp" placeholder="Weapon 2 HP">
                <input type="text" class="shield-name" placeholder="Shield Name & Size">
                <input type="number" class="shield-hp" placeholder="Shield HP">
                <input type="text" class="status" placeholder="Status (e.g., Injured, Severed)">
            </div>`;
            document.getElementById("henchmenContainer").insertAdjacentHTML("beforeend", henchmanTemplate);
            calculateHitLocations(henchmanId);
        }
    </script>
</body>
</html>
