<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RuneQuest NPC Combat Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 5px; background-color: black; color: white; text-align: center; }
        h2, h3 { font-variant: small-caps; letter-spacing: 1px; margin-bottom: 10px; }
        .tracker-container { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .tracker { width: 40%; padding: 10px; border: 2px solid #888; border-radius: 8px; background-color: #222; text-align: center; margin-bottom: 15px; }
        .henchmen-container { display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; }
        .henchmen { width: 30%; padding: 5px; border: 1px solid #555; border-radius: 6px; background-color: #333; text-align: center; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th, td { padding: 4px; text-align: center; border-bottom: 1px solid #666; }
        th { background-color: #444; }
        input { width: 40px; padding: 3px; text-align: center; background-color: #333; color: white; border: 1px solid #555; }
        .npc-name { width: 90%; padding: 4px; background-color: #444; color: white; border: 2px solid #999; text-align: center; margin-bottom: 3px; }
        .status { width: 100%; padding: 3px; background-color: #555; color: white; border: 1px solid #777; text-align: center; margin-top: 3px; }
        .duplicate-btn { margin-top: 5px; padding: 6px 12px; background-color: #888; color: black; border: none; cursor: pointer; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>RuneQuest NPC Combat Tracker</h2>
    
    <div class="tracker-container">
        <!-- Main Opponent Section -->
        <div class="tracker">
            <input type="text" class="npc-name" placeholder="Main Opponent Name" id="mainOpponent">
            <label for="mainTotalHP"><strong>Total HP:</strong></label>
            <input type="number" id="mainTotalHP" value="10" onchange="calculateHitLocations('main')">

            <table>
                <thead>
                    <tr>
                        <th>Location</th>
                        <th>Roll</th>
                        <th>Total HP</th>
                        <th>Current HP</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Right Leg</td><td>1-4</td><td><input type="text" id="mainRightLegTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Left Leg</td><td>5-8</td><td><input type="text" id="mainLeftLegTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Abdomen</td><td>9-11</td><td><input type="text" id="mainAbdomenTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Chest</td><td>12</td><td><input type="text" id="mainChestTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Right Arm</td><td>13-15</td><td><input type="text" id="mainRightArmTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Left Arm</td><td>16-18</td><td><input type="text" id="mainLeftArmTotal" readonly></td><td><input type="number"></td></tr>
                    <tr><td>Head</td><td>19-20</td><td><input type="text" id="mainHeadTotal" readonly></td><td><input type="number"></td></tr>
                </tbody>
            </table>
            <input type="text" class="status" placeholder="Status (e.g., Injured, Severed)">
        </div>
    
        <h3>Henchmen</h3>
        <button class="duplicate-btn" onclick="duplicateHenchman()">Add Henchman</button>
        <div class="henchmen-container" id="henchmenContainer"></div>
    </div>

    <script>
        function lookupHP(totalHP) {
            if (totalHP <= 6) return [2, 3, 2, 1, 1, 2, 2];
            else if (totalHP <= 9) return [3, 4, 3, 2, 2, 3, 3];
            else if (totalHP <= 12) return [4, 5, 4, 3, 3, 4, 4];
            else if (totalHP <= 15) return [5, 6, 5, 4, 4, 5, 5];
            else if (totalHP <= 18) return [6, 7, 6, 5, 5, 6, 6];
            else return [7, 8, 7, 6, 6, 7, 7];
        }

        function calculateHitLocations(id) {
            let totalHP = parseInt(document.getElementById(`${id}TotalHP`).value);
            let [rightLeg, leftLeg, abdomen, chest, rightArm, leftArm, head] = lookupHP(totalHP);

            document.getElementById(`${id}RightLegTotal`).value = rightLeg;
            document.getElementById(`${id}LeftLegTotal`).value = leftLeg;
            document.getElementById(`${id}AbdomenTotal`).value = abdomen;
            document.getElementById(`${id}ChestTotal`).value = chest;
            document.getElementById(`${id}RightArmTotal`).value = rightArm;
            document.getElementById(`${id}LeftArmTotal`).value = leftArm;
            document.getElementById(`${id}HeadTotal`).value = head;
        }

        function duplicateHenchman() {
            let henchmanId = `henchman${document.getElementsByClassName("henchmen").length + 1}`;
            let henchmanTemplate = `
            <div class="henchmen">
                <input type="text" class="npc-name" placeholder="Henchman Name">
                <label><strong>Total HP:</strong></label>
                <input type="number" id="${henchmanId}TotalHP" value="10" onchange="calculateHitLocations('${henchmanId}')">
                <table>
                    <thead>
                        <tr>
                            <th>Location</th>
                            <th>Roll</th>
                            <th>Total HP</th>
                            <th>Current HP</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Right Leg</td><td>1-4</td><td><input type="text" id="${henchmanId}RightLegTotal" readonly></td><td><input type="number"></td></tr>
                        <tr><td>Left Leg</td><td>5-8</td><td><input type="text" id="${henchmanId}LeftLegTotal" readonly></td><td><input type="number"></td></tr>
                        <tr><td>Abdomen</td><td>9-11</td><td><input type="text" id="${henchmanId}AbdomenTotal" readonly></td><td><input type="number"></td></tr>
                        <tr><td>Chest</td><td>12</td><td><input type="text" id="${henchmanId}ChestTotal" readonly></td><td><input type="number"></td></tr>
                    </tbody>
                </table>
            </div>`;
            document.getElementById("henchmenContainer").insertAdjacentHTML("beforeend", henchmanTemplate);
        }
    </script>
</body>
</html>
